{
	"name": "Movimento Estoque",
	"properties": {
		"activities": [
			{
				"name": "Mov Estoque ITG Smart",
				"type": "Copy",
				"dependsOn": [],
				"policy": {
					"timeout": "7.00:00:00",
					"retry": 0,
					"retryIntervalInSeconds": 30,
					"secureOutput": false,
					"secureInput": false
				},
				"userProperties": [],
				"typeProperties": {
					"source": {
						"type": "SqlServerSource",
						"sqlReaderQuery": "SELECT  \n\n    90 AS ID_SYS /*ITG*/\n    ,CAST(mma_data_mov AS DATE) AS DATA_MOVIMENTO\n    , MMA_SBA_COD               AS CD_LOCAL_ESTOQUE\n    , sba_nome                  AS DS_LOCAL_ESTOQUE\n    , STR_e.str_cod             as CD_ESTABELECIMENTO\n    , str_e.str_nome            AS DS_ESTABELECIMENTO\n    , mma_mat_cod               AS CD_MATERIAL\n    , mat_desc_resumida         AS DS_MATERIAL\n    -- , mma_ism_seq\n    -- , MMA_ISM_SEQ as MMA_ISM_SEQ_2\n    -- , mma_lot_num\n    , 0                         AS CD_CLASSE_MATERIAL\n    ,''                         AS DS_CLASSE_MATERIAL\n    , GMM_COD                   AS CD_GRUPO_MATERIAL\n    , gmm_nome                  AS DS_GRUPO_MATERIAL\n         \n    , tmm_tipo\n    ,MMA_TIPO_OPERACAO          as CD_TIPO_OPERACAO\n    , tmm_descr                 as DS_OPERACAO\n    , CASE\n        WHEN MMA_TIPO_OPERACAO = 'S1' OR MMA_TIPO_OPERACAO = 'S2'  THEN    mma_qtd * -1\n         ELSE mma_qtd\n      END                     AS QT_MOVIMENTO\n    , mma_valor               AS VL_MOVIMENTO\n    ,0                        AS VL_CPV\nFROM mma with (nolock)\nLEFT JOIN tmm  with (nolock)\n    ON tmm_cod = MMA_TIPO_OPERACAO\nLEFT JOIN mat with (nolock)\n    ON mma_mat_cod = mat_cod\nLEFT JOIN gmm with (nolock)\n    ON gmm_cod = mma_gmm_cod\nLEFT JOIN sba with (nolock)\n    ON sba_cod = mma_sba_cod\nLEFT JOIN str with (nolock)\n    ON str_cod = sba_str_cod\nLEFT JOIN str str_e  with (nolock)\n    ON str.str_str_cod = str_e.str_cod\nLEFT JOIN fne  with (nolock)\n    ON mat_fne_ult_entrada = FNE_COD\n-- LEFT JOIN lma lma with (nolock)\n--     ON lma.lma_gmm_cod =   gmm_cod  \nWHERE mma_data_mov >= '01/01/2021'\n\n",
						"queryTimeout": "02:00:00",
						"partitionOption": "None"
					},
					"sink": {
						"type": "DelimitedTextSink",
						"storeSettings": {
							"type": "FileServerWriteSettings"
						},
						"formatSettings": {
							"type": "DelimitedTextWriteSettings",
							"quoteAllText": true,
							"fileExtension": ".txt"
						}
					},
					"enableStaging": false
				},
				"inputs": [
					{
						"referenceName": "SMART_ITAIGARA_PrdDataSet",
						"type": "DatasetReference"
					}
				],
				"outputs": [
					{
						"referenceName": "CSV_Mov_Estoque_Smart_ITG",
						"type": "DatasetReference"
					}
				]
			}
		],
		"variables": {
			"MES_INICIO": {
				"type": "String",
				"defaultValue": "2021-04-01"
			},
			"MES_FIM": {
				"type": "String",
				"defaultValue": "2021-05-01"
			}
		},
		"folder": {
			"name": "Estoque"
		},
		"annotations": []
	}
}