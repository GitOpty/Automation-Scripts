{
	"$schema": "http://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#",
	"contentVersion": "1.0.0.0",
	"parameters": {
		"factoryName": {
			"type": "string",
			"metadata": "Data Factory name",
			"defaultValue": "OptyADF"
		},
		"AzureDatabricks_properties_typeProperties_existingClusterId": {
			"type": "string",
			"defaultValue": "0914-173138-dl7s1vxp"
		},
		"CloudTasyProd_properties_typeProperties_connectionString_secretName": {
			"type": "string",
			"defaultValue": "CLOUDTASY"
		}
	},
	"variables": {
		"factoryId": "[concat('Microsoft.DataFactory/factories/', parameters('factoryName'))]"
	},
	"resources": [
		{
			"name": "[concat(parameters('factoryName'), '/UROBRASIL_Repasse')]",
			"type": "Microsoft.DataFactory/factories/datasets",
			"apiVersion": "2018-06-01",
			"properties": {
				"linkedServiceName": {
					"referenceName": "UROBRASIL_Repasse",
					"type": "LinkedServiceReference"
				},
				"annotations": [],
				"type": "RestResource",
				"typeProperties": {},
				"schema": []
			},
			"dependsOn": []
		},
		{
			"name": "[concat(parameters('factoryName'), '/UROBRASIL_Repasse_Diario')]",
			"type": "Microsoft.DataFactory/factories/datasets",
			"apiVersion": "2018-06-01",
			"properties": {
				"linkedServiceName": {
					"referenceName": "UROBRASIL_Repasse_Diario",
					"type": "LinkedServiceReference"
				},
				"annotations": [],
				"type": "RestResource",
				"typeProperties": {},
				"schema": []
			},
			"dependsOn": []
		},
		{
			"name": "[concat(parameters('factoryName'), '/UROBRASIL_Teleorientacao')]",
			"type": "Microsoft.DataFactory/factories/datasets",
			"apiVersion": "2018-06-01",
			"properties": {
				"linkedServiceName": {
					"referenceName": "UROBRASIL_Teleorientacao",
					"type": "LinkedServiceReference"
				},
				"annotations": [],
				"type": "RestResource",
				"typeProperties": {},
				"schema": []
			},
			"dependsOn": []
		},
		{
			"name": "[concat(parameters('factoryName'), '/UROBRASIL_Teleorientacao_Diario')]",
			"type": "Microsoft.DataFactory/factories/datasets",
			"apiVersion": "2018-06-01",
			"properties": {
				"linkedServiceName": {
					"referenceName": "UROBRASIL_Teleorientacao_Diaria",
					"type": "LinkedServiceReference"
				},
				"annotations": [],
				"type": "RestResource",
				"typeProperties": {},
				"schema": []
			},
			"dependsOn": []
		},
		{
			"name": "[concat(parameters('factoryName'), '/UROBRASIL_Venda')]",
			"type": "Microsoft.DataFactory/factories/datasets",
			"apiVersion": "2018-06-01",
			"properties": {
				"linkedServiceName": {
					"referenceName": "UROBRASIL_Venda",
					"type": "LinkedServiceReference"
				},
				"annotations": [],
				"type": "RestResource",
				"typeProperties": {},
				"schema": []
			},
			"dependsOn": []
		},
		{
			"name": "[concat(parameters('factoryName'), '/UROBRASIL_Venda_Diaria')]",
			"type": "Microsoft.DataFactory/factories/datasets",
			"apiVersion": "2018-06-01",
			"properties": {
				"linkedServiceName": {
					"referenceName": "UROBRASIL_VendaDiaria",
					"type": "LinkedServiceReference"
				},
				"annotations": [],
				"type": "RestResource",
				"typeProperties": {},
				"schema": []
			},
			"dependsOn": []
		},
		{
			"name": "[concat(parameters('factoryName'), '/Urobrasil_Agendamento')]",
			"type": "Microsoft.DataFactory/factories/datasets",
			"apiVersion": "2018-06-01",
			"properties": {
				"linkedServiceName": {
					"referenceName": "UROBRASIL_Agendamento",
					"type": "LinkedServiceReference"
				},
				"annotations": [],
				"type": "RestResource",
				"typeProperties": {},
				"schema": []
			},
			"dependsOn": []
		},
		{
			"name": "[concat(parameters('factoryName'), '/Urobrasil_Agendamento_Diario')]",
			"type": "Microsoft.DataFactory/factories/datasets",
			"apiVersion": "2018-06-01",
			"properties": {
				"linkedServiceName": {
					"referenceName": "UROBRASIL_Agendamento_Diario",
					"type": "LinkedServiceReference"
				},
				"annotations": [],
				"type": "RestResource",
				"typeProperties": {},
				"schema": []
			},
			"dependsOn": []
		},
		{
			"name": "[concat(parameters('factoryName'), '/stage_cnv')]",
			"type": "Microsoft.DataFactory/factories/datasets",
			"apiVersion": "2018-06-01",
			"properties": {
				"description": "Tabela stage relativa ao Convenio",
				"linkedServiceName": {
					"referenceName": "AzureSQL_DB_Procedimentos",
					"type": "LinkedServiceReference"
				},
				"folder": {
					"name": "Data Warehouse"
				},
				"annotations": [],
				"type": "AzureSqlTable",
				"schema": [
					{
						"name": "cnv_cod",
						"type": "varchar"
					},
					{
						"name": "cnv_nome",
						"type": "varchar"
					},
					{
						"name": "cnv_rsoc",
						"type": "varchar"
					},
					{
						"name": "cnv_stat",
						"type": "char"
					},
					{
						"name": "cnv_caixa_fatura",
						"type": "char"
					},
					{
						"name": "cnv_tab",
						"type": "varchar"
					}
				],
				"typeProperties": {
					"schema": "stg",
					"table": "bi_stg_cnv"
				}
			},
			"dependsOn": []
		},
		{
			"name": "[concat(parameters('factoryName'), '/stage_emp')]",
			"type": "Microsoft.DataFactory/factories/datasets",
			"apiVersion": "2018-06-01",
			"properties": {
				"linkedServiceName": {
					"referenceName": "AzureSQL_DB_Procedimentos",
					"type": "LinkedServiceReference"
				},
				"folder": {
					"name": "Data Warehouse"
				},
				"annotations": [],
				"type": "AzureSqlTable",
				"schema": [
					{
						"name": "emp_cod",
						"type": "int",
						"precision": 10
					},
					{
						"name": "emp_rsoc",
						"type": "varchar"
					},
					{
						"name": "emp_stat",
						"type": "char"
					},
					{
						"name": "emp_cgc",
						"type": "varchar"
					}
				],
				"typeProperties": {
					"schema": "stg",
					"table": "bi_stg_emp"
				}
			},
			"dependsOn": []
		},
		{
			"name": "[concat(parameters('factoryName'), '/stage_gcc')]",
			"type": "Microsoft.DataFactory/factories/datasets",
			"apiVersion": "2018-06-01",
			"properties": {
				"linkedServiceName": {
					"referenceName": "AzureSQL_DB_Procedimentos",
					"type": "LinkedServiceReference"
				},
				"folder": {
					"name": "Data Warehouse"
				},
				"annotations": [],
				"type": "AzureSqlTable",
				"schema": [
					{
						"name": "gcc_cod",
						"type": "char"
					},
					{
						"name": "gcc_descr",
						"type": "varchar"
					},
					{
						"name": "gcc_str_cod",
						"type": "char"
					}
				],
				"typeProperties": {
					"schema": "stg",
					"table": "bi_stg_gcc"
				}
			},
			"dependsOn": []
		},
		{
			"name": "[concat(parameters('factoryName'), '/stage_mns')]",
			"type": "Microsoft.DataFactory/factories/datasets",
			"apiVersion": "2018-06-01",
			"properties": {
				"linkedServiceName": {
					"referenceName": "AzureSQL_DB_Procedimentos",
					"type": "LinkedServiceReference"
				},
				"folder": {
					"name": "Data Warehouse"
				},
				"annotations": [],
				"type": "AzureSqlTable",
				"schema": [
					{
						"name": "mns_dt",
						"type": "datetime",
						"precision": 23,
						"scale": 3
					},
					{
						"name": "mns_dt_reg",
						"type": "datetime",
						"precision": 23,
						"scale": 3
					},
					{
						"name": "mns_serie",
						"type": "int",
						"precision": 10
					},
					{
						"name": "mns_num",
						"type": "int",
						"precision": 10
					},
					{
						"name": "mns_nfs_numero",
						"type": "int",
						"precision": 10
					},
					{
						"name": "mns_tipo",
						"type": "varchar"
					},
					{
						"name": "mns_ind_liberado",
						"type": "varchar"
					},
					{
						"name": "mns_vlr",
						"type": "decimal",
						"precision": 18,
						"scale": 2
					},
					{
						"name": "mns_vlr_glosa",
						"type": "decimal",
						"precision": 18,
						"scale": 2
					}
				],
				"typeProperties": {
					"schema": "stg",
					"table": "bi_stg_mns"
				}
			},
			"dependsOn": []
		},
		{
			"name": "[concat(parameters('factoryName'), '/stage_mte')]",
			"type": "Microsoft.DataFactory/factories/datasets",
			"apiVersion": "2018-06-01",
			"properties": {
				"linkedServiceName": {
					"referenceName": "AzureSQL_DB_Procedimentos",
					"type": "LinkedServiceReference"
				},
				"folder": {
					"name": "Data Warehouse"
				},
				"annotations": [],
				"type": "AzureSqlTable",
				"schema": [
					{
						"name": "mte_dthr",
						"type": "datetime",
						"precision": 23,
						"scale": 3
					},
					{
						"name": "mte_serie",
						"type": "int",
						"precision": 10
					},
					{
						"name": "mte_seq",
						"type": "int",
						"precision": 10
					},
					{
						"name": "mte_status",
						"type": "char"
					},
					{
						"name": "mte_ind_rec_nf",
						"type": "char"
					},
					{
						"name": "mte_nfs_numero",
						"type": "int",
						"precision": 10
					},
					{
						"name": "mte_pac_reg",
						"type": "int",
						"precision": 10
					},
					{
						"name": "mte_ind_pac_resp",
						"type": "char"
					},
					{
						"name": "mte_tca_cod",
						"type": "char"
					},
					{
						"name": "mte_str_recep",
						"type": "char"
					},
					{
						"name": "mte_valor",
						"type": "decimal",
						"precision": 12,
						"scale": 2
					},
					{
						"name": "mte_desconto",
						"type": "decimal",
						"precision": 12,
						"scale": 2
					}
				],
				"typeProperties": {
					"schema": "stg",
					"table": "bi_stg_mte"
				}
			},
			"dependsOn": []
		},
		{
			"name": "[concat(parameters('factoryName'), '/stage_nfs')]",
			"type": "Microsoft.DataFactory/factories/datasets",
			"apiVersion": "2018-06-01",
			"properties": {
				"linkedServiceName": {
					"referenceName": "AzureSQL_DB_Procedimentos",
					"type": "LinkedServiceReference"
				},
				"folder": {
					"name": "Data Warehouse"
				},
				"annotations": [],
				"type": "AzureSqlTable",
				"schema": [
					{
						"name": "nfs_dt_emis",
						"type": "datetime",
						"precision": 23,
						"scale": 3
					},
					{
						"name": "nfs_numero",
						"type": "int",
						"precision": 10
					},
					{
						"name": "nfs_tipo",
						"type": "char"
					},
					{
						"name": "nfs_serie",
						"type": "char"
					},
					{
						"name": "nfs_ind_tipo_fatura",
						"type": "char"
					},
					{
						"name": "nfs_emp_cod",
						"type": "int",
						"precision": 10
					},
					{
						"name": "nfs_emp_codigo",
						"type": "char"
					},
					{
						"name": "nfs_nfl_num",
						"type": "int",
						"precision": 10
					},
					{
						"name": "nfs_str_cod",
						"type": "char"
					},
					{
						"name": "nfs_valor",
						"type": "decimal",
						"precision": 18,
						"scale": 2
					},
					{
						"name": "nfs_perc_iss",
						"type": "decimal",
						"precision": 5,
						"scale": 2
					},
					{
						"name": "nfs_perc_ir",
						"type": "decimal",
						"precision": 5,
						"scale": 2
					},
					{
						"name": "nfs_vlr_iss",
						"type": "decimal",
						"precision": 18,
						"scale": 2
					},
					{
						"name": "nfs_vlr_ir",
						"type": "decimal",
						"precision": 18,
						"scale": 2
					},
					{
						"name": "nfs_perc_multa",
						"type": "decimal",
						"precision": 5,
						"scale": 2
					},
					{
						"name": "nfs_vlr_pis",
						"type": "decimal",
						"precision": 18,
						"scale": 2
					},
					{
						"name": "nfs_vlr_cofins",
						"type": "decimal",
						"precision": 18,
						"scale": 2
					},
					{
						"name": "nfs_vlr_cssl",
						"type": "decimal",
						"precision": 18,
						"scale": 2
					},
					{
						"name": "nfs_perc_pis",
						"type": "decimal",
						"precision": 5,
						"scale": 2
					},
					{
						"name": "nfs_perc_cofins",
						"type": "decimal",
						"precision": 5,
						"scale": 2
					},
					{
						"name": "nfs_perc_cssl",
						"type": "decimal",
						"precision": 5,
						"scale": 2
					}
				],
				"typeProperties": {
					"schema": "stg",
					"table": "bi_stg_nfs"
				}
			},
			"dependsOn": []
		},
		{
			"name": "[concat(parameters('factoryName'), '/stage_rdi')]",
			"type": "Microsoft.DataFactory/factories/datasets",
			"apiVersion": "2018-06-01",
			"properties": {
				"linkedServiceName": {
					"referenceName": "AzureSQL_DB_Procedimentos",
					"type": "LinkedServiceReference"
				},
				"folder": {
					"name": "Data Warehouse"
				},
				"annotations": [],
				"type": "AzureSqlTable",
				"schema": [
					{
						"name": "rdi_vcto",
						"type": "datetime",
						"precision": 23,
						"scale": 3
					},
					{
						"name": "rdi_seq",
						"type": "decimal",
						"precision": 6,
						"scale": 0
					},
					{
						"name": "rdi_forma_pag",
						"type": "char"
					},
					{
						"name": "rdi_lib_repasse",
						"type": "char"
					},
					{
						"name": "rdi_mns_serie",
						"type": "int",
						"precision": 10
					},
					{
						"name": "rdi_mns_num",
						"type": "int",
						"precision": 10
					},
					{
						"name": "rdi_mte_serie",
						"type": "int",
						"precision": 10
					},
					{
						"name": "rdi_mte_seq",
						"type": "int",
						"precision": 10
					},
					{
						"name": "rdi_valor",
						"type": "decimal",
						"precision": 12,
						"scale": 2
					},
					{
						"name": "rdi_valor_complemento",
						"type": "decimal",
						"precision": 12,
						"scale": 2
					}
				],
				"typeProperties": {
					"schema": "stg",
					"table": "bi_stg_rdi"
				}
			},
			"dependsOn": []
		},
		{
			"name": "[concat(parameters('factoryName'), '/stage_str')]",
			"type": "Microsoft.DataFactory/factories/datasets",
			"apiVersion": "2018-06-01",
			"properties": {
				"linkedServiceName": {
					"referenceName": "AzureSQL_DB_Procedimentos",
					"type": "LinkedServiceReference"
				},
				"folder": {
					"name": "Data Warehouse"
				},
				"annotations": [],
				"type": "AzureSqlTable",
				"schema": [
					{
						"name": "str_cod",
						"type": "char"
					},
					{
						"name": "str_nome",
						"type": "char"
					},
					{
						"name": "str_resp",
						"type": "int",
						"precision": 10
					},
					{
						"name": "str_tipo",
						"type": "char"
					},
					{
						"name": "str_status",
						"type": "char"
					}
				],
				"typeProperties": {
					"schema": "stg",
					"table": "bi_stg_str"
				}
			},
			"dependsOn": []
		},
		{
			"name": "[concat(parameters('factoryName'), '/stage_tca')]",
			"type": "Microsoft.DataFactory/factories/datasets",
			"apiVersion": "2018-06-01",
			"properties": {
				"linkedServiceName": {
					"referenceName": "AzureSQL_DB_Procedimentos",
					"type": "LinkedServiceReference"
				},
				"folder": {
					"name": "Data Warehouse"
				},
				"annotations": [],
				"type": "AzureSqlTable",
				"schema": [
					{
						"name": "tca_cod",
						"type": "char"
					},
					{
						"name": "tca_descr",
						"type": "varchar"
					},
					{
						"name": "tca_qt_dias_vcto",
						"type": "decimal",
						"precision": 5,
						"scale": 0
					},
					{
						"name": "tca_ind_cr",
						"type": "char"
					},
					{
						"name": "tca_del_logica",
						"type": "char"
					},
					{
						"name": "tca_valor_padrao",
						"type": "decimal",
						"precision": 14,
						"scale": 2
					}
				],
				"typeProperties": {
					"schema": "stg",
					"table": "bi_stg_tca"
				}
			},
			"dependsOn": []
		},
		{
			"name": "[concat(parameters('factoryName'), '/stage_udp')]",
			"type": "Microsoft.DataFactory/factories/datasets",
			"apiVersion": "2018-06-01",
			"properties": {
				"linkedServiceName": {
					"referenceName": "AzureSQL_DB_Procedimentos",
					"type": "LinkedServiceReference"
				},
				"folder": {
					"name": "Data Warehouse"
				},
				"annotations": [],
				"type": "AzureSqlTable",
				"schema": [
					{
						"name": "udp_mte_serie_quita",
						"type": "int",
						"precision": 10
					},
					{
						"name": "udp_mte_seq_quita",
						"type": "int",
						"precision": 10
					},
					{
						"name": "udp_mte_serie_dep",
						"type": "int",
						"precision": 10
					},
					{
						"name": "udp_mte_seq_dep",
						"type": "int",
						"precision": 10
					},
					{
						"name": "udp_valor",
						"type": "decimal",
						"precision": 12,
						"scale": 2
					}
				],
				"typeProperties": {
					"schema": "stg",
					"table": "bi_stg_udp"
				}
			},
			"dependsOn": []
		},
		{
			"name": "[concat(parameters('factoryName'), '/AzureDatabricks')]",
			"type": "Microsoft.DataFactory/factories/linkedServices",
			"apiVersion": "2018-06-01",
			"properties": {
				"annotations": [],
				"type": "AzureDatabricks",
				"typeProperties": {
					"domain": "https://adb-4986612633596064.4.azuredatabricks.net",
					"accessToken": {
						"type": "AzureKeyVaultSecret",
						"store": {
							"referenceName": "SV_OptyKeyVault",
							"type": "LinkedServiceReference"
						},
						"secretName": "DatabricksTokenHmaisBrasil"
					},
					"existingClusterId": "[parameters('AzureDatabricks_properties_typeProperties_existingClusterId')]"
				}
			},
			"dependsOn": []
		},
		{
			"name": "[concat(parameters('factoryName'), '/CloudTasyProd')]",
			"type": "Microsoft.DataFactory/factories/linkedServices",
			"apiVersion": "2018-06-01",
			"properties": {
				"annotations": [],
				"type": "Oracle",
				"typeProperties": {
					"connectionString": {
						"type": "AzureKeyVaultSecret",
						"store": {
							"referenceName": "SV_OptyKeyVault",
							"type": "LinkedServiceReference"
						},
						"secretName": "[parameters('CloudTasyProd_properties_typeProperties_connectionString_secretName')]"
					}
				},
				"connectVia": {
					"referenceName": "ServidorArquivosBI",
					"type": "IntegrationRuntimeReference"
				}
			},
			"dependsOn": []
		}
	]
}