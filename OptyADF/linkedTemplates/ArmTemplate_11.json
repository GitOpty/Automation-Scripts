{
	"$schema": "http://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#",
	"contentVersion": "1.0.0.0",
	"parameters": {
		"factoryName": {
			"type": "string",
			"metadata": "Data Factory name",
			"defaultValue": "OptyADF"
		},
		"CloudTasyProd_NEW_connectionString": {
			"type": "secureString",
			"metadata": "Secure string for 'connectionString' of 'CloudTasyProd_NEW'"
		},
		"DEV_SMART_ITAIGARA_connectionString": {
			"type": "secureString",
			"metadata": "Secure string for 'connectionString' of 'DEV_SMART_ITAIGARA'"
		},
		"AzureDatabricks_properties_typeProperties_existingClusterId": {
			"type": "string",
			"defaultValue": "0914-173138-dl7s1vxp"
		},
		"CloudTasyProd_properties_typeProperties_connectionString_secretName": {
			"type": "string",
			"defaultValue": "CLOUDTASY"
		},
		"Con_Files_VM_properties_typeProperties_host": {
			"type": "string",
			"defaultValue": "C:\\Pasta repositório BI\\"
		},
		"Con_Files_VM_properties_typeProperties_userId": {
			"type": "string",
			"defaultValue": "hobrasil\\serv.corp.sa"
		},
		"Folder_Nexcore_Consolidado_properties_typeProperties_host": {
			"type": "string",
			"defaultValue": "C:\\Power BI Gateway Files\\Nexcore\\Consolidado"
		},
		"Folder_Nexcore_Consolidado_properties_typeProperties_userId": {
			"type": "string",
			"defaultValue": "hobrasil\\serv.corp.sa"
		},
		"Folder_Requestia_properties_typeProperties_host": {
			"type": "string",
			"defaultValue": "C:\\Power BI Gateway Files\\Requestia"
		},
		"Folder_Requestia_properties_typeProperties_userId": {
			"type": "string",
			"defaultValue": "hobrasil\\serv.corp.sa"
		},
		"Folder_Salesforce_Sharepoint_properties_typeProperties_host": {
			"type": "string",
			"defaultValue": "C:\\\\Users\\\\sa.automation\\\\Opty\\\\Salesforce Health Cloud - General\\\\Arquivos Carga Health Cloud"
		},
		"Folder_Salesforce_Sharepoint_properties_typeProperties_userId": {
			"type": "string",
			"defaultValue": "hobrasil\\serv.corp.sa"
		},
		"Folder_StorageVM_properties_typeProperties_host": {
			"type": "string",
			"defaultValue": "c:\\Storage\\StorageVM"
		},
		"Folder_StorageVM_properties_typeProperties_userId": {
			"type": "string",
			"defaultValue": "hobrasil\\serv.corp.sa"
		},
		"Folder_VM_properties_typeProperties_host": {
			"type": "string",
			"defaultValue": "C:\\Pasta repositório BI"
		},
		"Folder_VM_properties_typeProperties_userId": {
			"type": "string",
			"defaultValue": "hobrasil\\serv.corp.sa"
		},
		"HMO_SIMAH_properties_typeProperties_connectionString_secretName": {
			"type": "string",
			"defaultValue": "HMOSimah"
		},
		"Historicos_AgentesPorDia_CSI_properties_typeProperties_host": {
			"type": "string",
			"defaultValue": "C:\\Power BI Gateway Files\\Nexcore\\Historicos NEXCORE\\CSI\\AgentesPorDia"
		},
		"Historicos_AgentesPorDia_CSI_properties_typeProperties_userId": {
			"type": "string",
			"defaultValue": "hobrasil\\sa.automation"
		},
		"Historicos_AgentesPorDia_DAYHORC_properties_typeProperties_host": {
			"type": "string",
			"defaultValue": "C:\\Power BI Gateway Files\\Nexcore\\Historicos NEXCORE\\DAYHORC\\AgentesPorDia"
		},
		"Historicos_AgentesPorDia_DAYHORC_properties_typeProperties_userId": {
			"type": "string",
			"defaultValue": "hobrasil\\sa.automation"
		},
		"Historicos_AgentesPorDia_HOBL2_properties_typeProperties_host": {
			"type": "string",
			"defaultValue": "C:\\Power BI Gateway Files\\Nexcore\\Historicos NEXCORE\\HOBL2\\AgentesPorDia"
		},
		"Historicos_AgentesPorDia_HOBL2_properties_typeProperties_userId": {
			"type": "string",
			"defaultValue": "hobrasil\\sa.automation"
		},
		"Historicos_AgentesPorDia_HOSL_properties_typeProperties_host": {
			"type": "string",
			"defaultValue": "C:\\Power BI Gateway Files\\Nexcore\\Historicos NEXCORE\\HOSL\\AgentesPorDia"
		},
		"Historicos_AgentesPorDia_HOSL_properties_typeProperties_userId": {
			"type": "string",
			"defaultValue": "hobrasil\\sa.automation"
		},
		"Historicos_AgentesPorDia_INOB_properties_typeProperties_host": {
			"type": "string",
			"defaultValue": "C:\\Power BI Gateway Files\\Nexcore\\Historicos NEXCORE\\INOB\\AgentesPorDia"
		},
		"Historicos_AgentesPorDia_INOB_properties_typeProperties_userId": {
			"type": "string",
			"defaultValue": "hobrasil\\sa.automation"
		},
		"Historicos_AgentesPorDia_SADALLA_properties_typeProperties_host": {
			"type": "string",
			"defaultValue": "C:\\Power BI Gateway Files\\Nexcore\\Historicos NEXCORE\\SADALLA\\AgentesPorDia"
		},
		"Historicos_AgentesPorDia_SADALLA_properties_typeProperties_userId": {
			"type": "string",
			"defaultValue": "hobrasil\\sa.automation"
		},
		"Historicos_AgentesPorHora_CSI_properties_typeProperties_host": {
			"type": "string",
			"defaultValue": "C:\\Power BI Gateway Files\\Nexcore\\Historicos NEXCORE\\CSI\\AgentesPorHora"
		},
		"Historicos_AgentesPorHora_CSI_properties_typeProperties_userId": {
			"type": "string",
			"defaultValue": "hobrasil\\sa.automation"
		}
	},
	"variables": {
		"factoryId": "[concat('Microsoft.DataFactory/factories/', parameters('factoryName'))]"
	},
	"resources": [
		{
			"name": "[concat(parameters('factoryName'), '/stage_tca')]",
			"type": "Microsoft.DataFactory/factories/datasets",
			"apiVersion": "2018-06-01",
			"properties": {
				"linkedServiceName": {
					"referenceName": "AzureSQL_DB_Procedimentos",
					"type": "LinkedServiceReference"
				},
				"folder": {
					"name": "Data Warehouse"
				},
				"annotations": [],
				"type": "AzureSqlTable",
				"schema": [
					{
						"name": "tca_cod",
						"type": "char"
					},
					{
						"name": "tca_descr",
						"type": "varchar"
					},
					{
						"name": "tca_qt_dias_vcto",
						"type": "decimal",
						"precision": 5,
						"scale": 0
					},
					{
						"name": "tca_ind_cr",
						"type": "char"
					},
					{
						"name": "tca_del_logica",
						"type": "char"
					},
					{
						"name": "tca_valor_padrao",
						"type": "decimal",
						"precision": 14,
						"scale": 2
					}
				],
				"typeProperties": {
					"schema": "stg",
					"table": "bi_stg_tca"
				}
			},
			"dependsOn": []
		},
		{
			"name": "[concat(parameters('factoryName'), '/stage_udp')]",
			"type": "Microsoft.DataFactory/factories/datasets",
			"apiVersion": "2018-06-01",
			"properties": {
				"linkedServiceName": {
					"referenceName": "AzureSQL_DB_Procedimentos",
					"type": "LinkedServiceReference"
				},
				"folder": {
					"name": "Data Warehouse"
				},
				"annotations": [],
				"type": "AzureSqlTable",
				"schema": [
					{
						"name": "udp_mte_serie_quita",
						"type": "int",
						"precision": 10
					},
					{
						"name": "udp_mte_seq_quita",
						"type": "int",
						"precision": 10
					},
					{
						"name": "udp_mte_serie_dep",
						"type": "int",
						"precision": 10
					},
					{
						"name": "udp_mte_seq_dep",
						"type": "int",
						"precision": 10
					},
					{
						"name": "udp_valor",
						"type": "decimal",
						"precision": 12,
						"scale": 2
					}
				],
				"typeProperties": {
					"schema": "stg",
					"table": "bi_stg_udp"
				}
			},
			"dependsOn": []
		},
		{
			"name": "[concat(parameters('factoryName'), '/AzureDatabricks')]",
			"type": "Microsoft.DataFactory/factories/linkedServices",
			"apiVersion": "2018-06-01",
			"properties": {
				"annotations": [],
				"type": "AzureDatabricks",
				"typeProperties": {
					"domain": "https://adb-4986612633596064.4.azuredatabricks.net",
					"accessToken": {
						"type": "AzureKeyVaultSecret",
						"store": {
							"referenceName": "SV_OptyKeyVault",
							"type": "LinkedServiceReference"
						},
						"secretName": "DatabricksTokenHmaisBrasil"
					},
					"existingClusterId": "[parameters('AzureDatabricks_properties_typeProperties_existingClusterId')]"
				}
			},
			"dependsOn": []
		},
		{
			"name": "[concat(parameters('factoryName'), '/CloudTasyProd')]",
			"type": "Microsoft.DataFactory/factories/linkedServices",
			"apiVersion": "2018-06-01",
			"properties": {
				"annotations": [],
				"type": "Oracle",
				"typeProperties": {
					"connectionString": {
						"type": "AzureKeyVaultSecret",
						"store": {
							"referenceName": "SV_OptyKeyVault",
							"type": "LinkedServiceReference"
						},
						"secretName": "[parameters('CloudTasyProd_properties_typeProperties_connectionString_secretName')]"
					}
				},
				"connectVia": {
					"referenceName": "ServidorArquivosBI",
					"type": "IntegrationRuntimeReference"
				}
			},
			"dependsOn": []
		},
		{
			"name": "[concat(parameters('factoryName'), '/CloudTasyProd_NEW')]",
			"type": "Microsoft.DataFactory/factories/linkedServices",
			"apiVersion": "2018-06-01",
			"properties": {
				"annotations": [],
				"type": "Oracle",
				"typeProperties": {
					"connectionString": "[parameters('CloudTasyProd_NEW_connectionString')]"
				},
				"connectVia": {
					"referenceName": "ServidorArquivosBI",
					"type": "IntegrationRuntimeReference"
				}
			},
			"dependsOn": []
		},
		{
			"name": "[concat(parameters('factoryName'), '/Con_Files_VM')]",
			"type": "Microsoft.DataFactory/factories/linkedServices",
			"apiVersion": "2018-06-01",
			"properties": {
				"annotations": [],
				"type": "FileServer",
				"typeProperties": {
					"host": "[parameters('Con_Files_VM_properties_typeProperties_host')]",
					"userId": "[parameters('Con_Files_VM_properties_typeProperties_userId')]",
					"password": {
						"type": "AzureKeyVaultSecret",
						"store": {
							"referenceName": "SV_OptyKeyVault",
							"type": "LinkedServiceReference"
						},
						"secretName": "vmSA"
					}
				},
				"connectVia": {
					"referenceName": "ServidorArquivosBI",
					"type": "IntegrationRuntimeReference"
				}
			},
			"dependsOn": []
		},
		{
			"name": "[concat(parameters('factoryName'), '/DEV_SMART_ITAIGARA')]",
			"type": "Microsoft.DataFactory/factories/linkedServices",
			"apiVersion": "2018-06-01",
			"properties": {
				"annotations": [],
				"type": "SqlServer",
				"typeProperties": {
					"connectionString": "[parameters('DEV_SMART_ITAIGARA_connectionString')]"
				},
				"connectVia": {
					"referenceName": "ServidorArquivosBI",
					"type": "IntegrationRuntimeReference"
				}
			},
			"dependsOn": []
		},
		{
			"name": "[concat(parameters('factoryName'), '/Folder_Nexcore_Consolidado')]",
			"type": "Microsoft.DataFactory/factories/linkedServices",
			"apiVersion": "2018-06-01",
			"properties": {
				"description": "Folder onde são colocados os arquivos coletados do FTP Nexcore. Script agendado para execução diária no host 10.47.251.10",
				"annotations": [],
				"type": "FileServer",
				"typeProperties": {
					"host": "[parameters('Folder_Nexcore_Consolidado_properties_typeProperties_host')]",
					"userId": "[parameters('Folder_Nexcore_Consolidado_properties_typeProperties_userId')]",
					"password": {
						"type": "AzureKeyVaultSecret",
						"store": {
							"referenceName": "SV_OptyKeyVault",
							"type": "LinkedServiceReference"
						},
						"secretName": "vmSA"
					}
				},
				"connectVia": {
					"referenceName": "ServidorArquivosBI",
					"type": "IntegrationRuntimeReference"
				}
			},
			"dependsOn": []
		},
		{
			"name": "[concat(parameters('factoryName'), '/Folder_Requestia')]",
			"type": "Microsoft.DataFactory/factories/linkedServices",
			"apiVersion": "2018-06-01",
			"properties": {
				"annotations": [],
				"type": "FileServer",
				"typeProperties": {
					"host": "[parameters('Folder_Requestia_properties_typeProperties_host')]",
					"userId": "[parameters('Folder_Requestia_properties_typeProperties_userId')]",
					"password": {
						"type": "AzureKeyVaultSecret",
						"store": {
							"referenceName": "SV_OptyKeyVault",
							"type": "LinkedServiceReference"
						},
						"secretName": "vmSA"
					}
				},
				"connectVia": {
					"referenceName": "ServidorArquivosBI",
					"type": "IntegrationRuntimeReference"
				}
			},
			"dependsOn": []
		},
		{
			"name": "[concat(parameters('factoryName'), '/Folder_Salesforce_Sharepoint')]",
			"type": "Microsoft.DataFactory/factories/linkedServices",
			"apiVersion": "2018-06-01",
			"properties": {
				"annotations": [],
				"type": "FileServer",
				"typeProperties": {
					"host": "[parameters('Folder_Salesforce_Sharepoint_properties_typeProperties_host')]",
					"userId": "[parameters('Folder_Salesforce_Sharepoint_properties_typeProperties_userId')]",
					"password": {
						"type": "AzureKeyVaultSecret",
						"store": {
							"referenceName": "SV_OptyKeyVault",
							"type": "LinkedServiceReference"
						},
						"secretName": "vmSA"
					}
				},
				"connectVia": {
					"referenceName": "ServidorArquivosBI",
					"type": "IntegrationRuntimeReference"
				}
			},
			"dependsOn": []
		},
		{
			"name": "[concat(parameters('factoryName'), '/Folder_StorageVM')]",
			"type": "Microsoft.DataFactory/factories/linkedServices",
			"apiVersion": "2018-06-01",
			"properties": {
				"annotations": [],
				"type": "FileServer",
				"typeProperties": {
					"host": "[parameters('Folder_StorageVM_properties_typeProperties_host')]",
					"userId": "[parameters('Folder_StorageVM_properties_typeProperties_userId')]",
					"password": {
						"type": "AzureKeyVaultSecret",
						"store": {
							"referenceName": "SV_OptyKeyVault",
							"type": "LinkedServiceReference"
						},
						"secretName": "vmSA"
					}
				},
				"connectVia": {
					"referenceName": "ServidorArquivosBI",
					"type": "IntegrationRuntimeReference"
				}
			},
			"dependsOn": []
		},
		{
			"name": "[concat(parameters('factoryName'), '/Folder_VM')]",
			"type": "Microsoft.DataFactory/factories/linkedServices",
			"apiVersion": "2018-06-01",
			"properties": {
				"annotations": [],
				"type": "FileServer",
				"typeProperties": {
					"host": "[parameters('Folder_VM_properties_typeProperties_host')]",
					"userId": "[parameters('Folder_VM_properties_typeProperties_userId')]",
					"password": {
						"type": "AzureKeyVaultSecret",
						"store": {
							"referenceName": "SV_OptyKeyVault",
							"type": "LinkedServiceReference"
						},
						"secretName": "vmSA"
					}
				},
				"connectVia": {
					"referenceName": "ServidorArquivosBI",
					"type": "IntegrationRuntimeReference"
				}
			},
			"dependsOn": []
		},
		{
			"name": "[concat(parameters('factoryName'), '/HMO_SIMAH')]",
			"type": "Microsoft.DataFactory/factories/linkedServices",
			"apiVersion": "2018-06-01",
			"properties": {
				"annotations": [],
				"type": "Oracle",
				"typeProperties": {
					"connectionString": {
						"type": "AzureKeyVaultSecret",
						"store": {
							"referenceName": "SV_OptyKeyVault",
							"type": "LinkedServiceReference"
						},
						"secretName": "[parameters('HMO_SIMAH_properties_typeProperties_connectionString_secretName')]"
					}
				},
				"connectVia": {
					"referenceName": "ServidorArquivosBI",
					"type": "IntegrationRuntimeReference"
				}
			},
			"dependsOn": []
		},
		{
			"name": "[concat(parameters('factoryName'), '/Historicos_AgentesPorDia_CSI')]",
			"type": "Microsoft.DataFactory/factories/linkedServices",
			"apiVersion": "2018-06-01",
			"properties": {
				"description": "Historicos_AgentesPorDia_CSI",
				"annotations": [],
				"type": "FileServer",
				"typeProperties": {
					"host": "[parameters('Historicos_AgentesPorDia_CSI_properties_typeProperties_host')]",
					"userId": "[parameters('Historicos_AgentesPorDia_CSI_properties_typeProperties_userId')]",
					"password": {
						"type": "AzureKeyVaultSecret",
						"store": {
							"referenceName": "SV_OptyKeyVault",
							"type": "LinkedServiceReference"
						},
						"secretName": "vmSA"
					}
				},
				"connectVia": {
					"referenceName": "ServidorArquivosBI",
					"type": "IntegrationRuntimeReference"
				}
			},
			"dependsOn": []
		},
		{
			"name": "[concat(parameters('factoryName'), '/Historicos_AgentesPorDia_DAYHORC')]",
			"type": "Microsoft.DataFactory/factories/linkedServices",
			"apiVersion": "2018-06-01",
			"properties": {
				"description": "Historicos_AgentesPorDia_DAYHORC",
				"annotations": [],
				"type": "FileServer",
				"typeProperties": {
					"host": "[parameters('Historicos_AgentesPorDia_DAYHORC_properties_typeProperties_host')]",
					"userId": "[parameters('Historicos_AgentesPorDia_DAYHORC_properties_typeProperties_userId')]",
					"password": {
						"type": "AzureKeyVaultSecret",
						"store": {
							"referenceName": "SV_OptyKeyVault",
							"type": "LinkedServiceReference"
						},
						"secretName": "vmSA"
					}
				},
				"connectVia": {
					"referenceName": "ServidorArquivosBI",
					"type": "IntegrationRuntimeReference"
				}
			},
			"dependsOn": []
		},
		{
			"name": "[concat(parameters('factoryName'), '/Historicos_AgentesPorDia_HOBL2')]",
			"type": "Microsoft.DataFactory/factories/linkedServices",
			"apiVersion": "2018-06-01",
			"properties": {
				"description": "Historicos_AgentesPorDia_HOBL2",
				"annotations": [],
				"type": "FileServer",
				"typeProperties": {
					"host": "[parameters('Historicos_AgentesPorDia_HOBL2_properties_typeProperties_host')]",
					"userId": "[parameters('Historicos_AgentesPorDia_HOBL2_properties_typeProperties_userId')]",
					"password": {
						"type": "AzureKeyVaultSecret",
						"store": {
							"referenceName": "SV_OptyKeyVault",
							"type": "LinkedServiceReference"
						},
						"secretName": "vmSA"
					}
				},
				"connectVia": {
					"referenceName": "ServidorArquivosBI",
					"type": "IntegrationRuntimeReference"
				}
			},
			"dependsOn": []
		},
		{
			"name": "[concat(parameters('factoryName'), '/Historicos_AgentesPorDia_HOSL')]",
			"type": "Microsoft.DataFactory/factories/linkedServices",
			"apiVersion": "2018-06-01",
			"properties": {
				"description": "Historicos_AgentesPorDia_HOSL",
				"annotations": [],
				"type": "FileServer",
				"typeProperties": {
					"host": "[parameters('Historicos_AgentesPorDia_HOSL_properties_typeProperties_host')]",
					"userId": "[parameters('Historicos_AgentesPorDia_HOSL_properties_typeProperties_userId')]",
					"password": {
						"type": "AzureKeyVaultSecret",
						"store": {
							"referenceName": "SV_OptyKeyVault",
							"type": "LinkedServiceReference"
						},
						"secretName": "vmSA"
					}
				},
				"connectVia": {
					"referenceName": "ServidorArquivosBI",
					"type": "IntegrationRuntimeReference"
				}
			},
			"dependsOn": []
		},
		{
			"name": "[concat(parameters('factoryName'), '/Historicos_AgentesPorDia_INOB')]",
			"type": "Microsoft.DataFactory/factories/linkedServices",
			"apiVersion": "2018-06-01",
			"properties": {
				"description": "Historicos_AgentesPorDia_INOB",
				"annotations": [],
				"type": "FileServer",
				"typeProperties": {
					"host": "[parameters('Historicos_AgentesPorDia_INOB_properties_typeProperties_host')]",
					"userId": "[parameters('Historicos_AgentesPorDia_INOB_properties_typeProperties_userId')]",
					"password": {
						"type": "AzureKeyVaultSecret",
						"store": {
							"referenceName": "SV_OptyKeyVault",
							"type": "LinkedServiceReference"
						},
						"secretName": "vmSA"
					}
				},
				"connectVia": {
					"referenceName": "ServidorArquivosBI",
					"type": "IntegrationRuntimeReference"
				}
			},
			"dependsOn": []
		},
		{
			"name": "[concat(parameters('factoryName'), '/Historicos_AgentesPorDia_SADALLA')]",
			"type": "Microsoft.DataFactory/factories/linkedServices",
			"apiVersion": "2018-06-01",
			"properties": {
				"description": "Historicos_AgentesPorDia_SADALLA",
				"annotations": [],
				"type": "FileServer",
				"typeProperties": {
					"host": "[parameters('Historicos_AgentesPorDia_SADALLA_properties_typeProperties_host')]",
					"userId": "[parameters('Historicos_AgentesPorDia_SADALLA_properties_typeProperties_userId')]",
					"password": {
						"type": "AzureKeyVaultSecret",
						"store": {
							"referenceName": "SV_OptyKeyVault",
							"type": "LinkedServiceReference"
						},
						"secretName": "vmSA"
					}
				},
				"connectVia": {
					"referenceName": "ServidorArquivosBI",
					"type": "IntegrationRuntimeReference"
				}
			},
			"dependsOn": []
		},
		{
			"name": "[concat(parameters('factoryName'), '/Historicos_AgentesPorHora_CSI')]",
			"type": "Microsoft.DataFactory/factories/linkedServices",
			"apiVersion": "2018-06-01",
			"properties": {
				"description": "Historicos_AgentesPorHora_CSI",
				"annotations": [],
				"type": "FileServer",
				"typeProperties": {
					"host": "[parameters('Historicos_AgentesPorHora_CSI_properties_typeProperties_host')]",
					"userId": "[parameters('Historicos_AgentesPorHora_CSI_properties_typeProperties_userId')]",
					"password": {
						"type": "AzureKeyVaultSecret",
						"store": {
							"referenceName": "SV_OptyKeyVault",
							"type": "LinkedServiceReference"
						},
						"secretName": "vmSA"
					}
				},
				"connectVia": {
					"referenceName": "ServidorArquivosBI",
					"type": "IntegrationRuntimeReference"
				}
			},
			"dependsOn": []
		}
	]
}