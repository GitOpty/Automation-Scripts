{
	"$schema": "http://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#",
	"contentVersion": "1.0.0.0",
	"parameters": {
		"factoryName": {
			"type": "string",
			"metadata": "Data Factory name",
			"defaultValue": "OptyADF"
		}
	},
	"variables": {
		"factoryId": "[concat('Microsoft.DataFactory/factories/', parameters('factoryName'))]"
	},
	"resources": [
		{
			"name": "[concat(parameters('factoryName'), '/AZ_WAC_REC_TASY')]",
			"type": "Microsoft.DataFactory/factories/datasets",
			"apiVersion": "2018-06-01",
			"properties": {
				"linkedServiceName": {
					"referenceName": "AzureSQL_DB_Procedimentos",
					"type": "LinkedServiceReference"
				},
				"annotations": [],
				"type": "AzureSqlTable",
				"schema": [],
				"typeProperties": {
					"schema": "stg",
					"table": "wac_tbl_recebimento_tasy"
				}
			},
			"dependsOn": []
		},
		{
			"name": "[concat(parameters('factoryName'), '/BLOB_UPO_FPA')]",
			"type": "Microsoft.DataFactory/factories/datasets",
			"apiVersion": "2018-06-01",
			"properties": {
				"linkedServiceName": {
					"referenceName": "Az_blob_UPO_FPA",
					"type": "LinkedServiceReference"
				},
				"annotations": [],
				"type": "Excel",
				"typeProperties": {
					"sheetName": "default_1",
					"location": {
						"type": "AzureBlobStorageLocation",
						"fileName": "UPO.xlsx",
						"container": "upofpa"
					},
					"firstRowAsHeader": true
				},
				"schema": [
					{
						"name": "Estabelecimento",
						"type": "String"
					},
					{
						"name": "Data",
						"type": "String"
					},
					{
						"name": "Hora",
						"type": "String"
					},
					{
						"name": "Índice",
						"type": "String"
					},
					{
						"name": "Atendimento",
						"type": "String"
					},
					{
						"name": "Conta",
						"type": "String"
					},
					{
						"name": "CODCONVENIO",
						"type": "String"
					},
					{
						"name": "CONVENIO",
						"type": "String"
					},
					{
						"name": "Convenio Ajustado",
						"type": "String"
					},
					{
						"name": "Tipo Convenio",
						"type": "String"
					},
					{
						"name": "PACIENTE",
						"type": "String"
					},
					{
						"name": "Medico",
						"type": "String"
					},
					{
						"name": "SETOR",
						"type": "String"
					},
					{
						"name": "ID item",
						"type": "String"
					},
					{
						"name": "Cod Item",
						"type": "String"
					},
					{
						"name": "Item",
						"type": "String"
					},
					{
						"name": "CodProced Principal",
						"type": "String"
					},
					{
						"name": "Procedimento Principal",
						"type": "String"
					},
					{
						"name": "Status Conta",
						"type": "String"
					},
					{
						"name": "Categoria",
						"type": "String"
					},
					{
						"name": "Categoria Auxiliar",
						"type": "String"
					},
					{
						"name": "Classe",
						"type": "String"
					},
					{
						"name": "Especialidade",
						"type": "String"
					},
					{
						"name": "Procedimento",
						"type": "String"
					},
					{
						"name": "Patologia",
						"type": "String"
					},
					{
						"name": "Qtde",
						"type": "String"
					},
					{
						"name": "Qtde Ajuste",
						"type": "String"
					},
					{
						"name": "ROB",
						"type": "String"
					},
					{
						"name": "mês",
						"type": "String"
					},
					{
						"name": "Ano",
						"type": "String"
					},
					{
						"name": "DE_Para Unidades",
						"type": "String"
					},
					{
						"name": "De_Para Modelo de Convenio",
						"type": "String"
					},
					{
						"name": "Retorno",
						"type": "String"
					}
				]
			},
			"dependsOn": []
		},
		{
			"name": "[concat(parameters('factoryName'), '/Binary_ANS')]",
			"type": "Microsoft.DataFactory/factories/datasets",
			"apiVersion": "2018-06-01",
			"properties": {
				"linkedServiceName": {
					"referenceName": "AzureBlobStorage_ANS",
					"type": "LinkedServiceReference"
				},
				"parameters": {
					"folder": {
						"type": "string"
					}
				},
				"annotations": [],
				"type": "Binary",
				"typeProperties": {
					"location": {
						"type": "AzureBlobStorageLocation",
						"folderPath": {
							"value": "@dataset().folder",
							"type": "Expression"
						},
						"container": "ans"
					}
				}
			},
			"dependsOn": []
		},
		{
			"name": "[concat(parameters('factoryName'), '/Binary_ContasReceber')]",
			"type": "Microsoft.DataFactory/factories/datasets",
			"apiVersion": "2018-06-01",
			"properties": {
				"linkedServiceName": {
					"referenceName": "AzureBlobStorage_Recebimento",
					"type": "LinkedServiceReference"
				},
				"parameters": {
					"FileSystem": {
						"type": "string"
					}
				},
				"annotations": [],
				"type": "Binary",
				"typeProperties": {
					"location": {
						"type": "AzureBlobStorageLocation",
						"container": {
							"value": "@dataset().FileSystem",
							"type": "Expression"
						}
					}
				}
			},
			"dependsOn": []
		},
		{
			"name": "[concat(parameters('factoryName'), '/CEOP_DS')]",
			"type": "Microsoft.DataFactory/factories/datasets",
			"apiVersion": "2018-06-01",
			"properties": {
				"description": "Data Source que lê dados gravados na pasta CEOP no storage account",
				"linkedServiceName": {
					"referenceName": "sv_hmaisbrasildatadriven",
					"type": "LinkedServiceReference"
				},
				"annotations": [],
				"type": "DelimitedText",
				"typeProperties": {
					"location": {
						"type": "AzureBlobFSLocation",
						"fileName": "CEOP_TESTE.csv",
						"fileSystem": "ceop"
					},
					"columnDelimiter": ";",
					"escapeChar": "\\",
					"firstRowAsHeader": true,
					"quoteChar": "\""
				},
				"schema": [
					{
						"name": "Atendimento;Cnv.Id;Conv�nio;Guia;Guia Operadora;Data Guia;Prontu�rio;Paciente;Matricula;Validade Matricula;M�dico Atendimento;Tp. Atend;Status Atend;Data Atendimento;Hora Atendimento;Data Sa�da;Hora Sa�da;Conta;Data Conta;ID Item;Codigo Item;Item;Tipo Item;ID Grupo;Grupo do Item;Status Conta;Data Lan�amento;Hora Lan�amento;Quant.;Valor Unit.;Valor Total;ID Plano;Plano;Id Empresa;Empresa;Cod.Prestador;Prestador;Cod.Executante;Executante;Data Solic.Exame;Data Laudo Exame;Data Entrega Exame;ID Tecnico;T�cnico;Valor Glosado;Valor Recebido;Motivo de Glosa;",
						"type": "String"
					}
				]
			},
			"dependsOn": []
		},
		{
			"name": "[concat(parameters('factoryName'), '/CEOP_DS_EXCEL')]",
			"type": "Microsoft.DataFactory/factories/datasets",
			"apiVersion": "2018-06-01",
			"properties": {
				"linkedServiceName": {
					"referenceName": "sv_hmaisbrasildatadriven",
					"type": "LinkedServiceReference"
				},
				"annotations": [],
				"type": "Excel",
				"typeProperties": {
					"sheetName": "Plan1",
					"location": {
						"type": "AzureBlobFSLocation",
						"fileName": "CEOP_GESTHOR.xlsx",
						"fileSystem": "ceop"
					},
					"firstRowAsHeader": true
				},
				"schema": [
					{
						"name": "Atendimento",
						"type": "String"
					},
					{
						"name": "Cnv.Id",
						"type": "String"
					},
					{
						"name": "Convênio",
						"type": "String"
					},
					{
						"name": "Guia",
						"type": "String"
					},
					{
						"name": "Guia Operadora",
						"type": "String"
					},
					{
						"name": "Data Guia",
						"type": "String"
					},
					{
						"name": "Prontuário",
						"type": "String"
					},
					{
						"name": "Paciente",
						"type": "String"
					},
					{
						"name": "Matricula",
						"type": "String"
					},
					{
						"name": "Validade Matricula",
						"type": "String"
					},
					{
						"name": "Médico Atendimento",
						"type": "String"
					},
					{
						"name": "Tp. Atend",
						"type": "String"
					},
					{
						"name": "Status Atend",
						"type": "String"
					},
					{
						"name": "Data Atendimento",
						"type": "String"
					},
					{
						"name": "Hora Atendimento",
						"type": "String"
					},
					{
						"name": "Data Saída",
						"type": "String"
					},
					{
						"name": "Hora Saída",
						"type": "String"
					},
					{
						"name": "Conta",
						"type": "String"
					},
					{
						"name": "Data Conta",
						"type": "String"
					},
					{
						"name": "ID Item",
						"type": "String"
					},
					{
						"name": "Codigo Item",
						"type": "String"
					},
					{
						"name": "Item",
						"type": "String"
					},
					{
						"name": "Tipo Item",
						"type": "String"
					},
					{
						"name": "ID Grupo",
						"type": "String"
					},
					{
						"name": "Grupo do Item",
						"type": "String"
					},
					{
						"name": "Status Conta",
						"type": "String"
					},
					{
						"name": "Data Lançamento",
						"type": "String"
					},
					{
						"name": "Hora Lançamento",
						"type": "String"
					},
					{
						"name": "Quant.",
						"type": "String"
					},
					{
						"name": "Valor Unit.",
						"type": "String"
					},
					{
						"name": "Valor Total",
						"type": "String"
					},
					{
						"name": "ID Plano",
						"type": "String"
					},
					{
						"name": "Plano",
						"type": "String"
					},
					{
						"name": "Id Empresa",
						"type": "String"
					},
					{
						"name": "Empresa",
						"type": "String"
					},
					{
						"name": "Cod.Prestador",
						"type": "String"
					},
					{
						"name": "Prestador",
						"type": "String"
					},
					{
						"name": "Cod.Executante",
						"type": "String"
					},
					{
						"name": "Executante",
						"type": "String"
					},
					{
						"name": "Data Solic.Exame",
						"type": "String"
					},
					{
						"name": "Data Laudo Exame",
						"type": "String"
					},
					{
						"name": "Data Entrega Exame",
						"type": "String"
					},
					{
						"name": "ID Tecnico",
						"type": "String"
					},
					{
						"name": "Técnico",
						"type": "String"
					},
					{
						"name": "Valor Glosado",
						"type": "String"
					},
					{
						"name": "Valor Recebido",
						"type": "String"
					},
					{
						"name": "Motivo de Glosa",
						"type": "String"
					}
				]
			},
			"dependsOn": []
		},
		{
			"name": "[concat(parameters('factoryName'), '/CSV_ANS_TUSS')]",
			"type": "Microsoft.DataFactory/factories/datasets",
			"apiVersion": "2018-06-01",
			"properties": {
				"linkedServiceName": {
					"referenceName": "AzureBlobStorage_ANS",
					"type": "LinkedServiceReference"
				},
				"parameters": {
					"Filename": {
						"type": "string"
					}
				},
				"annotations": [],
				"type": "DelimitedText",
				"typeProperties": {
					"location": {
						"type": "AzureBlobStorageLocation",
						"fileName": {
							"value": "@dataset().Filename",
							"type": "Expression"
						},
						"folderPath": "tuss",
						"container": "ans"
					},
					"columnDelimiter": ";",
					"encodingName": "ISO-8859-1",
					"escapeChar": "\\",
					"firstRowAsHeader": true,
					"quoteChar": "\""
				},
				"schema": []
			},
			"dependsOn": []
		},
		{
			"name": "[concat(parameters('factoryName'), '/CSV_OFTALMODIAGNOSE')]",
			"type": "Microsoft.DataFactory/factories/datasets",
			"apiVersion": "2018-06-01",
			"properties": {
				"linkedServiceName": {
					"referenceName": "AzureBlobStorage_Oftalmodiagnose",
					"type": "LinkedServiceReference"
				},
				"parameters": {
					"nome_tabela": {
						"type": "string"
					}
				},
				"annotations": [],
				"type": "DelimitedText",
				"typeProperties": {
					"location": {
						"type": "AzureBlobStorageLocation",
						"fileName": {
							"value": "@dataset().nome_tabela",
							"type": "Expression"
						},
						"container": "oftalmodiagnose"
					},
					"columnDelimiter": ";",
					"rowDelimiter": "^",
					"escapeChar": "\\",
					"firstRowAsHeader": true,
					"quoteChar": ""
				},
				"schema": []
			},
			"dependsOn": []
		},
		{
			"name": "[concat(parameters('factoryName'), '/CSV_VISAODF_LEG_FPA')]",
			"type": "Microsoft.DataFactory/factories/datasets",
			"apiVersion": "2018-06-01",
			"properties": {
				"linkedServiceName": {
					"referenceName": "AzureBlobStorage_VisaoDF",
					"type": "LinkedServiceReference"
				},
				"annotations": [],
				"type": "DelimitedText",
				"typeProperties": {
					"location": {
						"type": "AzureBlobStorageLocation",
						"fileName": "VISAODF_LEG_FPA.csv",
						"container": "visaodf"
					},
					"columnDelimiter": ",",
					"encodingName": "ISO-8859-1",
					"escapeChar": "\\",
					"firstRowAsHeader": true,
					"quoteChar": "\""
				},
				"schema": [
					{
						"name": "DATA",
						"type": "String"
					},
					{
						"name": "OS",
						"type": "String"
					},
					{
						"name": "CONVENIO",
						"type": "String"
					},
					{
						"name": "DS_ITEM",
						"type": "String"
					},
					{
						"name": "CATEGORIA",
						"type": "String"
					},
					{
						"name": "CLASSE",
						"type": "String"
					},
					{
						"name": "QTD",
						"type": "String"
					},
					{
						"name": "VALOR_OS",
						"type": "String"
					}
				]
			},
			"dependsOn": []
		},
		{
			"name": "[concat(parameters('factoryName'), '/DESTINO_ADF')]",
			"type": "Microsoft.DataFactory/factories/datasets",
			"apiVersion": "2018-06-01",
			"properties": {
				"linkedServiceName": {
					"referenceName": "AzureSQL_DB_Procedimentos",
					"type": "LinkedServiceReference"
				},
				"folder": {
					"name": "Data Warehouse"
				},
				"annotations": [],
				"type": "AzureSqlTable",
				"schema": [],
				"typeProperties": {
					"schema": "A",
					"table": "DESTINO_X"
				}
			},
			"dependsOn": []
		},
		{
			"name": "[concat(parameters('factoryName'), '/DS_EXCEL_DIN')]",
			"type": "Microsoft.DataFactory/factories/datasets",
			"apiVersion": "2018-06-01",
			"properties": {
				"linkedServiceName": {
					"referenceName": "ls_hmaisbrasildatadriven",
					"type": "LinkedServiceReference"
				},
				"parameters": {
					"FileSystem": {
						"type": "string"
					},
					"File_Name": {
						"type": "string"
					},
					"SheetName": {
						"type": "string"
					},
					"file_Directory": {
						"type": "string"
					}
				},
				"annotations": [],
				"type": "Excel",
				"typeProperties": {
					"sheetName": {
						"value": "@dataset().SheetName",
						"type": "Expression"
					},
					"location": {
						"type": "AzureBlobStorageLocation",
						"fileName": {
							"value": "@dataset().File_Name",
							"type": "Expression"
						},
						"folderPath": {
							"value": "@dataset().file_Directory",
							"type": "Expression"
						},
						"container": {
							"value": "@dataset().FileSystem",
							"type": "Expression"
						}
					},
					"firstRowAsHeader": true
				},
				"schema": []
			},
			"dependsOn": []
		},
		{
			"name": "[concat(parameters('factoryName'), '/DS_Five9')]",
			"type": "Microsoft.DataFactory/factories/datasets",
			"apiVersion": "2018-06-01",
			"properties": {
				"linkedServiceName": {
					"referenceName": "Five9",
					"type": "LinkedServiceReference"
				},
				"annotations": [],
				"type": "RestResource",
				"typeProperties": {
					"relativeUrl": {
						"value": "\\99 - Relatorios ESP\\ESP0001",
						"type": "Expression"
					}
				},
				"schema": []
			},
			"dependsOn": []
		},
		{
			"name": "[concat(parameters('factoryName'), '/DS_HDATADRIVEN_BINARY')]",
			"type": "Microsoft.DataFactory/factories/datasets",
			"apiVersion": "2018-06-01",
			"properties": {
				"linkedServiceName": {
					"referenceName": "ls_hmaisbrasildatadriven",
					"type": "LinkedServiceReference"
				},
				"parameters": {
					"Folder": {
						"type": "string"
					}
				},
				"annotations": [],
				"type": "Binary",
				"typeProperties": {
					"location": {
						"type": "AzureBlobStorageLocation",
						"container": {
							"value": "@dataset().Folder",
							"type": "Expression"
						}
					}
				}
			},
			"dependsOn": []
		},
		{
			"name": "[concat(parameters('factoryName'), '/DS_HMAISDATADRIVEN')]",
			"type": "Microsoft.DataFactory/factories/datasets",
			"apiVersion": "2018-06-01",
			"properties": {
				"linkedServiceName": {
					"referenceName": "sv_hmaisbrasildatadriven",
					"type": "LinkedServiceReference"
				},
				"parameters": {
					"Filesystem": {
						"type": "string"
					},
					"File": {
						"type": "string"
					}
				},
				"annotations": [],
				"type": "DelimitedText",
				"typeProperties": {
					"location": {
						"type": "AzureBlobFSLocation",
						"fileName": {
							"value": "@dataset().File",
							"type": "Expression"
						},
						"fileSystem": {
							"value": "@dataset().Filesystem",
							"type": "Expression"
						}
					},
					"columnDelimiter": ";",
					"encodingName": "UTF-8",
					"escapeChar": "\\",
					"firstRowAsHeader": true,
					"quoteChar": "\""
				},
				"schema": []
			},
			"dependsOn": []
		},
		{
			"name": "[concat(parameters('factoryName'), '/DS_HMAISDATADRIVEN_BINARY')]",
			"type": "Microsoft.DataFactory/factories/datasets",
			"apiVersion": "2018-06-01",
			"properties": {
				"linkedServiceName": {
					"referenceName": "sv_hmaisbrasildatadriven",
					"type": "LinkedServiceReference"
				},
				"parameters": {
					"FileSystem": {
						"type": "string"
					}
				},
				"annotations": [],
				"type": "Binary",
				"typeProperties": {
					"location": {
						"type": "AzureBlobFSLocation",
						"fileSystem": {
							"value": "@dataset().FileSystem",
							"type": "Expression"
						}
					}
				}
			},
			"dependsOn": []
		},
		{
			"name": "[concat(parameters('factoryName'), '/DW_ORIGEM')]",
			"type": "Microsoft.DataFactory/factories/datasets",
			"apiVersion": "2018-06-01",
			"properties": {
				"linkedServiceName": {
					"referenceName": "AzureSQL_DB_Procedimentos",
					"type": "LinkedServiceReference"
				},
				"folder": {
					"name": "Data Warehouse"
				},
				"annotations": [],
				"type": "AzureSqlTable",
				"schema": [],
				"typeProperties": {}
			},
			"dependsOn": []
		},
		{
			"name": "[concat(parameters('factoryName'), '/EXECL_BLOB_DIN')]",
			"type": "Microsoft.DataFactory/factories/datasets",
			"apiVersion": "2018-06-01",
			"properties": {
				"linkedServiceName": {
					"referenceName": "blob_din",
					"type": "LinkedServiceReference"
				},
				"parameters": {
					"FileSystem": {
						"type": "string"
					},
					"File": {
						"type": "string"
					}
				},
				"annotations": [],
				"type": "Excel",
				"typeProperties": {
					"sheetName": {
						"value": "@concat('Base ',toUpper(replace(dataset().File,'.xlsx','')))",
						"type": "Expression"
					},
					"location": {
						"type": "AzureBlobStorageLocation",
						"fileName": {
							"value": "@dataset().File",
							"type": "Expression"
						},
						"container": {
							"value": "@dataset().FileSystem",
							"type": "Expression"
						}
					},
					"firstRowAsHeader": true
				},
				"schema": []
			},
			"dependsOn": []
		},
		{
			"name": "[concat(parameters('factoryName'), '/EXPORT_CSV_DIVERSOS')]",
			"type": "Microsoft.DataFactory/factories/datasets",
			"apiVersion": "2018-06-01",
			"properties": {
				"linkedServiceName": {
					"referenceName": "ls_hmaisbrasildatadriven",
					"type": "LinkedServiceReference"
				},
				"parameters": {
					"Nome_arquivo": {
						"type": "string"
					}
				},
				"annotations": [],
				"type": "DelimitedText",
				"typeProperties": {
					"location": {
						"type": "AzureBlobStorageLocation",
						"fileName": {
							"value": "@concat(dataset().Nome_arquivo,'.csv')",
							"type": "Expression"
						},
						"container": "diversos"
					},
					"columnDelimiter": ";",
					"escapeChar": "\\",
					"firstRowAsHeader": true,
					"quoteChar": "\""
				},
				"schema": [
					{
						"type": "String"
					}
				]
			},
			"dependsOn": []
		},
		{
			"name": "[concat(parameters('factoryName'), '/Excel_Recebimento')]",
			"type": "Microsoft.DataFactory/factories/datasets",
			"apiVersion": "2018-06-01",
			"properties": {
				"linkedServiceName": {
					"referenceName": "AzureBlobStorage_Recebimento",
					"type": "LinkedServiceReference"
				},
				"parameters": {
					"FileBlob": {
						"type": "string"
					}
				},
				"annotations": [],
				"type": "Excel",
				"typeProperties": {
					"sheetName": "Recebimentos Consolidado",
					"location": {
						"type": "AzureBlobStorageLocation",
						"fileName": {
							"value": "@dataset().FileBlob",
							"type": "Expression"
						},
						"container": "contasreceber"
					},
					"firstRowAsHeader": true
				},
				"schema": []
			},
			"dependsOn": []
		},
		{
			"name": "[concat(parameters('factoryName'), '/Excel_VISAODF_Leg')]",
			"type": "Microsoft.DataFactory/factories/datasets",
			"apiVersion": "2018-06-01",
			"properties": {
				"linkedServiceName": {
					"referenceName": "AzureBlobStorage_VisaoDF",
					"type": "LinkedServiceReference"
				},
				"annotations": [],
				"type": "Excel",
				"typeProperties": {
					"sheetName": "VISAODF",
					"location": {
						"type": "AzureBlobStorageLocation",
						"fileName": "VISAODF_DW.xlsx",
						"container": "visaodf"
					},
					"firstRowAsHeader": true
				},
				"schema": []
			},
			"dependsOn": []
		}
	]
}